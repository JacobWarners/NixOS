// -*- mode: json -*-

{
    "layer": "top",
    "position": "top",
   // "output": "eDP-1", // Laptop monitor
    "gtk-layer-shell": true,

    // All modules combined into one array for centering via CSS
    "modules-center": [
        "group/hardware", // Reference to the defined group below
        "custom/space",
        "custom/app",
        "custom/space",
	"custom/nyt",
        "custom/space",
        "custom/workspaces",
        "custom/space",
        "custom/cpu-governor",
        "custom/space",
        "network",
        "custom/space",
        "battery",
        "custom/space",
        "clock",
        "custom/space",
        "bluetooth",
        "custom/space"
    ],

    // ===============================================
    // Module and Group DEFINITIONS go HERE (as top-level keys)
    // ===============================================

    "group/hardware": { // This is a top-level key
        "orientation": "horizontal",
        "modules": [
            "custom/space",
            "custom/cpuicon",
            "cpu",
            "custom/memicon1",
            "memory",
            "custom/space",
            "pulseaudio",
            "custom/space"
        ]
    },
    "group/wireless": { // This is another top-level key
        "orientation": "horizontal",
        "modules": [
            "bluetooth",
            "custom/space",
            "network"
        ]
    },
    "custom/workspaces": {
        "exec": "~/.config/waybar/w2.sh",
        "interval": 1,
        "tooltip": false,
        "tooltip-format": "Workspaces"
    },
    "custom/cpuicon": {
        "format": " ",
        "tooltip": false,
        "tooltip-format": "CPU usage"
    },
    "custom/memicon": {
        "format": "    m    ",
        "tooltip": "Memory usage"
    },
    "custom/memicon1": {
        "format": "      ",
        "tooltip": false,
        "tooltip-format": "Memory usage"
    },
    "custom/space": {
        "format": " ",
        "tooltip": false
    },
    "custom/nyt": {
	"on-click": "~/.config/waybar/scripts/nyt-games.sh &> /dev/null",
        "format": " ",
        "tooltip": false
    },

"custom/cpu-governor": {
    "format": "{}",
    "return-type": "json",

    "format-icons": {
        "performance": "󱐋",
        "powersave": "󰌪"
    },
    "exec": "/home/jake/.config/waybar/scripts/governor.sh",
    "on-click": "/home/jake/.config/waybar/scripts/governor.sh cycle",
    "interval": 2
},


    "custom/dot": {
        "format": "",
        "tooltip": false
    },

"custom/app": {
  "format": "{}",
  "interval": 60,
  "exec": "ps -eo pcpu,comm --sort=-%cpu | head -n 2 | tail -n 1 | awk '{printf \"🔥 %s - %.1f%% CPU\", $2, $1}'",
  "tooltip": true
},


    "clock": {
        "format": " {0:%d-%m-%y}  {0:%H:%M}",
        "tooltip-format": "<tt>{calendar}</tt>",
        "calendar": {
            "mode": "month",
            "format": {
                "months": "<span color='#eeeeee'><b>{}</b></span>",
                "days": "<span color='#eeeeee'><b>{}</b></span>",
                "weeks": "<span color='#eeeeee'><b>W{}</b></span>",
                "weekdays": "<span color='#eeeeee'><b>{}</b></span>",
                "today": "<span color='#175b70'><b>{}</b></span>"
            }
        }
    },
    "pulseaudio": {
        "format": " {icon} {volume:2}%",
        "format-bluetooth": "{icon}  {volume}%",
        "format-source": " {volume}%",
        "format-muted": "MUTE",
        "format-icons": {
            "headphones": "",
            "default": [
                "",
                ""
            ]
        },
        "scroll-step": 5,
        "on-click": "~/scripts/audio-switcher.sh",
        "on-click-right": "pavucontrol"
    },
    "memory": {
        "interval": 5,
        "format": "{}%"
    },
    "cpu": {
        "interval": 5,
        "on-click": "emacsclient -c -e '(proced)'",
        "format": "{usage:2}%"
    },
    "battery": {
        "states": {
            "full": 100,
            "good": 99,
            "warning": 60,
            "critical": 15,
            "plugin": 5
        },
        "on-click": "wlogout",
        "format": "{icon} {capacity}%  ",
        "format-icons": [
            "",
            "",
            "",
            "",
            ""
        ]
    },
    "tray": {
        "icon-size": 20
    },
    "network": {
        "format-wifi": " {essid}",
        "format-ethernet": "{ipaddr}/{cidr}  ",
        "tooltip-format": "{ifname} via {gwaddr}\n           {signalStrength}% ",
        "format-linked": "{ifname} (No IP)  ",
        "format-disconnected": "  ",
        "on-click": "nmcli dev wifi rescan; hyprctl notify 5 1500 'rgb(d3c6aa)' 'Wifi rescan!'"
    },
    "backlight": {
        "device": "intel_backlight",
        "format": " {icon} {percent}%",
        "format-icons": ["", "", ""]
    },
    "bluetooth": {
	"on-click": "blueman-manager",
        "on-click-right": "~/.local/bin/toggle-bluetooth.sh",
        "format": "  0",
 //       "format-disabled": "",
        "format-connected": "  {num_connections}",
        "tooltip-format": "{controller_alias}\t{controller_address}",
        "tooltip-format-connected": "{controller_alias}\t{controller_address}\n\n{device_enumerate}",
        "tooltip-format-enumerate-connected": "{device_alias}\t{device_address}"
    }
}
